<title>ui-icode</title>
<meta attribute=type type=string default="js">

<template mode=closed>
	<code>{{ $.value }}</code>
</template>

<script>
import('/-/js/site-settings/index.js').then(mod => $.siteSettings = mod)

live.link($.$value, () => {
	const content = $.content?.trim() ?? ''
	return $.siteSettings?.format(content, $.language) ?? content
})

connected(() => {
	const options = {childList: true, characterData: true, subtree: true}
	when(this).observes('mutation', options)
		.then(() => $.content = this.textContent)
		.now()
})
</script>

<style>
:host {
}
</style>
